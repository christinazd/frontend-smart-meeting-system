<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>login</title>
  <link rel="shortcut icon" type="image/x-icon" href="images/l1.png">

  <!-- Bootstrap 4 -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>

  <style>
    /* ---------- Base / Reset ---------- */
    :root{
      --glass: rgba(255,255,255,0.06);
      --glass-2: rgba(255,255,255,0.08);
      --accent1: #9ACBD0;
      --accent2: #006A71;
      --soft-white: #F2EFE7;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, Poppins, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    body{
       background: linear-gradient(180deg,#abd1d5 5%, #48A6A7 70%, #006A71 100%);

      color:var(--soft-white);
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:30px;
    }

    /* ---------- Canvas for portal + card ---------- */
    .scene {
      width: 100%;
      max-width:1100px;
      display:flex;
      gap:40px;
      align-items:center;
      justify-content:center;
      perspective: 1600px; /* deep perspective for 3d tilt */
    }

    /* ---------- Portal (circular frame that holds the image) ---------- */
    .portal {
      position:relative;
      width:520px;
      height:520px;
      border-radius:50%;
      background: radial-gradient(circle at 30% 20%, rgba(135, 14, 14, 0.03), transparent 25%);
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:
        0 20px 60px rgba(0,0,0,0.6),
        inset 0 1px 0 rgba(255,255,255,0.03);
      transform-style: preserve-3d;
      transition: transform 0.35s cubic-bezier(.2,.9,.2,1);
      will-change: transform;
    }

    /* glass ring frame */
    .portal::before{
      content:"";
      position:absolute;
      inset:-10px;
      border-radius:50%;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0));
      filter: blur(18px);
      z-index:0;
      pointer-events:none;
    }

    /* image layer (clipped to circle) */
    .portal .portal-media {
      position:relative;
      width:88%;
      height:88%;
      border-radius:50%;
      overflow:hidden;
      transform: translateZ(60px) scale(1.02); /* give it depth */
      box-shadow: 0 12px 40px rgba(0,0,0,0.35);
    }
    .portal .portal-media img{
      width:110%;
      height:110%;
      object-fit:cover;
      object-position: center;
      transform-origin:center;
      transition: transform 12s linear;
      filter: saturate(1.05) contrast(1.02);
      will-change: transform;
    }

    /* subtle animated zoom on load */
    .portal .portal-media img.zoom {
      animation: portalZoom 20s linear infinite alternate;
    }
    @keyframes portalZoom {
      from { transform: scale(1) translateY(0); }
      to   { transform: scale(1.06) translateY(-6px); }
    }

    /* soft reflective overlay / god rays */
    .portal .rays{
      position:absolute;
      inset:0;
      pointer-events:none;
      mix-blend-mode:screen;
      opacity:0.9;
    }
    .rays .ray {
      position:absolute;
      width:180%;
      height:140%;
      left:-40%;
      top:-40%;
      background: radial-gradient(closest-side, rgba(255,255,255,0.18), rgba(255,255,255,0.02) 40%, transparent 60%);
      transform-origin:center;
      filter: blur(28px) saturate(1.3);
      animation: rayMove 12s linear infinite;
      opacity:0.6;
    }
    .rays .ray.r2{ transform: rotate(45deg); animation-duration: 16s; opacity:0.45; }
    @keyframes rayMove{
      from{ transform: translateY(-6%) rotate(0deg) scale(1); }
      to  { transform: translateY(6%) rotate(6deg) scale(1.02); }
    }

    /* simulated chair-pulse / subtle life movement (mask overlay) */
    .portal .life{
      position:absolute;
      inset:0;
      pointer-events:none;
      mix-blend-mode:overlay;
      opacity:0.9;
    }
   .life .pulse{
      position:absolute;
      width:40%;
      height:40%;
      border-radius:20px;
      left:56%;
      top:58%;
      background: radial-gradient(circle, rgba(255,255,255,0.03), transparent 40%);
      transform-origin:center;
      animation: seatMove 6s cubic-bezier(.2,.8,.2,1) infinite;
      filter:blur(6px);
    }
    .life .pulse.p2{ left:22%; top:62%; animation-delay:0.8s; width:30%; opacity:0.8}
    @keyframes seatMove {
      0%{ transform: translateY(0) rotate(0) scale(1); opacity:0.9}
      50%{ transform: translateY(-6px) rotate(-0.6deg) scale(1.01); opacity:1 }
      100%{ transform: translateY(0) rotate(0) scale(1); opacity:0.9 }
    }

     ripple waves triggered on login
    .ripple {
      position:absolute;
      border-radius:50%;
      transform:translate(-50%,-50%) scale(0);
      pointer-events:none;
      background: radial-gradient(circle, rgba(0,200,255,0.16), rgba(0,110,255,0.04));
      box-shadow: 0 0 80px rgba(0,150,255,0.18);
      will-change: transform, opacity;
      z-index:5;
    }

    /* ---------- Floating login card (appears to come out of portal) ---------- */
    .card-wrap {
      width:420px;
      transform-style:preserve-3d;
      transition: transform 0.35s cubic-bezier(.2,.9,.2,1);
    }

    .floating-card {
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border-radius:18px;
      padding:28px;
      box-shadow: 0 24px 60px rgba(3,12,24,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.04);
      transform: translateZ(100px) translateY(-18px);
      margin-left: 50%;
      margin-right: -50%;
    }

    .brand {
      display:flex;align-items:center;gap:12px;margin-bottom:14px;
    }
    .brand .logo {
      width:46px;height:46px;border-radius:10px;
      background:linear-gradient(135deg,var(--accent1),var(--accent2));
      display:flex;align-items:center;justify-content:center;font-weight:700;color:#001;
      box-shadow: 0 6px 20px rgba(0,110,255,0.18);
    }
    .brand .title { font-size:1.05rem;font-weight:600;color:var(--soft-white); }

    /* form controls - neon underline animated */
    .form-control {
      background:transparent;border:0;border-radius:8px;padding:12px 12px 10px 12px;color:var(--soft-white);
      box-shadow:none;
      outline:none;
      position:relative;
      z-index:2;
    }
    .input-wrap {
      position:relative;margin-bottom:18px;
      border-radius:10px;
      background: linear-gradient(180deg, rgba(37, 6, 116, 0.02), rgba(201, 22, 174, 0.01));
      padding:8px;
      border:1px solid rgba(255,255,255,0.03);
    }
    .input-underline {
      position:absolute;left:12px;right:12px;bottom:8px;height:3px;border-radius:3px;
      background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      overflow:hidden;
    }
    .input-underline .neon {
      position:absolute;left:0;top:0;height:100%;width:0%;
      background: linear-gradient(90deg,var(--accent1),var(--accent2));
      transition: width 0.45s cubic-bezier(.2,.9,.2,1);
      box-shadow: 0 6px 30px rgba(0,120,255,0.18);
    }
    .input-wrap.focused .input-underline .neon { width:100%; }

    /* password eye */
    .eye {
      position:absolute;right:12px;top:12px;cursor:pointer;font-size:18px;color:rgba(255,255,255,0.72);
      z-index:4;
    }

    /* login button - 3d / sweep */
    .btn-epic {
      width:100%;
      padding:12px;
      border-radius:12px;
      border:0;
      color:#021528;
      font-weight:700;
      letter-spacing:0.4px;
      background: linear-gradient(90deg, var(--accent1), var(--accent2));
      box-shadow: 0 10px 40px rgba(0,110,255,0.22);
      position:relative;
      overflow:hidden;
    }
    .btn-epic .sweep {
      position:absolute;left:-40%;top:-10%;width:40%;height:220%;
      transform:skewX(-22deg);
      background: rgba(255,255,255,0.12);
      transition: left .6s cubic-bezier(.2,.9,.2,1);
      pointer-events:none;
    }
    .btn-epic:hover .sweep { left:120%; }

    /* small text */
    .muted { color: rgba(255,255,255,0.65); font-size:0.9rem}
    .forgot { font-size:0.92rem;color:var(--accent1); text-decoration:none; font-weight:600 }

    /* responsive tweaks */
    @media(max-width:1200px){ .scene{flex-direction:column;gap:22px} .portal{width:420px;height:420px} .card-wrap{width:88%} }
    @media(max-width:520px){ .portal{width:320px;height:320px} .card-wrap{width:92%} .floating-card{padding:20px} }
/* Half-Curve Container */
/*.half-curve {
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    width: 350px;
    height: 500px;
    border-top-right-radius: 250px;
    border-bottom-right-radius: 250px;
    overflow: hidden;
    backdrop-filter: blur(10px);
    border: 4px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 0 40px rgba(0, 174, 255, 0.6), inset 0 0 25px rgba(255, 255, 255, 0.15);
    animation: glowPulse 4s ease-in-out infinite;
    z-index: 1;
}

/* Image inside curve */
/*.half-curve-inner {
    width: 100%;
    height: 100%;
    background: url("images/loginn.jpg") center/cover no-repeat;
    transition: transform 0.4s ease;
}

/* Hover parallax effect */
/*.half-curve:hover .half-curve-inner {
    transform: scale(1.05) translateX(8px);
}
added */
.half-circle {
        position: absolute;
    top: 0;
    left: 0;
    width: 55%;
    height: 100%;
    background: linear-gradient(180deg, #abd1d5, #48A6A7, #006A71);
    clip-path: ellipse(80% 100% at 0% 50%);
    box-shadow: 0 0 60px rgba(0, 174, 255, 0.6),
                inset 0 0 40px rgba(255, 255, 255, 0.15);
    animation: glowPulse 4s ease-in-out infinite;

    }

    /* Image inside half circle */
    .half-circle img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }

    .half-circle:hover img {
        transform: scale(1.05);
    }
/* Glowing border animation */
@keyframes glowPulse {
    0% { box-shadow: 0 0 40px rgba(0, 174, 255, 0.6), inset 0 0 25px rgba(255, 255, 255, 0.15); }
    50% { box-shadow: 0 0 60px rgba(0, 174, 255, 0.9), inset 0 0 35px rgba(255, 255, 255, 0.25); }
    100% { box-shadow: 0 0 40px rgba(0, 174, 255, 0.6), inset 0 0 25px rgba(255, 255, 255, 0.15); }
}
 #particles {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 2;
    }
/* Waves */
    .wave-container {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 150px;
        overflow: hidden;
        z-index: 5;
    }
    .wave {
        position: absolute;
        bottom: 0;
        width: 200%;
        height: 100%;
        background-repeat: repeat-x;
        animation: waveMove 15s linear infinite;
        opacity: 0.5;
    }
    .wave:nth-child(2) {
        animation-duration: 20s;
        opacity: 0.3;
        bottom: 10px;
    }
    @keyframes waveMove {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }

#floating-particles {
  position: fixed;          /* sits on top of page but can be moved with z-index */
  inset: 0;                 /* full-screen cover */
  width: 100%;
  height: 100%;
  pointer-events: none;     /* never intercept clicks */
  z-index: 2;               /* default z-index ‚Äî change if you need it above/below elements */
  mix-blend-mode: normal;
}

/* Canvas inside is full-size and crisp */
#floating-particles canvas {
  width: 100%;
  height: 100%;
  display: block;
}
  </style>
</head>
<body>
  <div id="floating-particles" aria-hidden="true"></div>
  <!-- Waves -->
<div class="wave-container">
    <svg class="wave" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 150">
        <path fill="#006A71" d="M0,64L48,74.7C96,85,192,107,288,122.7C384,139,480,149,576,133.3C672,117,768,75,864,74.7C960,75,1056,117,1152,128C1248,139,1344,117,1392,106.7L1440,96V150H0Z"/>
    </svg>
    <svg class="wave" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 150">
        <path fill="#48A6A7" d="M0,96L48,90.7C96,85,192,75,288,80C384,85,480,107,576,122.7C672,139,768,149,864,133.3C960,117,1056,75,1152,69.3C1248,64,1344,85,1392,96L1440,107V150H0Z"/>
    </svg>
</div>


<div class="half-circle">
    <img src="images/loginn.jpg" alt="Meeting Room" />
</div>
  <div class="scene" id="scene">
    <!-- PORTAL: circular integrated image with animated overlays -->


    <!-- FLOATING CARD that visually projects out of portal -->
    <div class="card-wrap" id="cardWrap">
      <div class="floating-card">
        <div class="brand">
          <div class="logo">G</div>
          <div class="title">WELCOME BACK!</div>
        </div>

        <!-- Form begins -->
        <form id="loginForm" autocomplete="off" novalidate>
          <!-- Email / Username -->
          <div class="input-wrap" id="wrap-user">
            <label class="muted">Email or Username</label>
            <input type="text" class="form-control" id="user" placeholder="jane.doe@example.com" required />
            <div class="input-underline"><div class="neon"></div></div>
          </div>

          <!-- Password -->
          <div class="input-wrap" id="wrap-pass" style="position:relative;">
            <label class="muted">Password</label>
            <input type="password" class="form-control" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required />
            <div class="eye" id="eyeToggle" title="Show / hide password">üëÅÔ∏è</div>
            <div class="input-underline"><div class="neon"></div></div>
          </div>

          <div class="d-flex justify-content-between align-items-center mb-2">
            <div class="muted">Remember device</div>
            <a href="#" class="forgot" id="forgotLink">Forgot Password?</a>
          </div>

          <button type="submit" class="btn-epic" id="loginBtn">
            <span>Login</span>
            <span class="sweep"></span>
          </button>

           <div id="loginAlert" class="alert alert-danger mt-3 d-none" role="alert">
    Failed to login.
  </div>
        </form>
        <!-- Form ends -->
      </div>
    </div>
  </div>

  <!-- Dependencies -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script>
    // ---------- Helpers & references ----------
    const portal = document.getElementById('portal');
    const portalImg = document.getElementById('portal-img');
    const portalMedia = document.getElementById('portal-media');
    const scene = document.getElementById('scene');
    const cardWrap = document.getElementById('cardWrap');
    const wrapUser = document.getElementById('wrap-user');
    const wrapPass = document.getElementById('wrap-pass');
    const userInput = document.getElementById('user');
    const passInput = document.getElementById('password');
    const eyeToggle = document.getElementById('eyeToggle');
    const loginForm = document.getElementById('loginForm');
    const ripples = document.getElementById('ripples');

    // Add focused class on input focus for neon underline animation
    [userInput, passInput].forEach(inp=>{
      inp.addEventListener('focus', e=>{
        inp.parentElement.classList.add('focused');
      });
      inp.addEventListener('blur', e=>{
        if(!inp.value) inp.parentElement.classList.remove('focused');
      });
      // initial state if prefilled
      if(inp.value) inp.parentElement.classList.add('focused');
    });

    // Password visibility toggle
    eyeToggle.addEventListener('click', function(){
      const type = passInput.getAttribute('type') === 'password' ? 'text' : 'password';
      passInput.setAttribute('type', type);
      this.textContent = (type === 'text') ? 'üôà' : 'üëÅÔ∏è';
    });

    // Parallax tilt: portal and card slightly move based on mouse
    (function tilt(){
      const limiter = 20; // sensitivity
      document.addEventListener('mousemove', (e)=>{
        const rect = scene.getBoundingClientRect();
        const cx = rect.left + rect.width/2;
        const cy = rect.top + rect.height/2;
        const dx = e.clientX - cx;
        const dy = e.clientY - cy;

        const rx = (dy / rect.height) * limiter; // rotateX
        const ry = -(dx / rect.width) * limiter;  // rotateY

        // subtle transforms

        cardWrap.style.transform = `translateZ(120px) rotateX(${rx*0.35}deg) rotateY(${ry*0.35}deg) translateY(-18px)`;
        // parallax image translate smaller
        portalImg.style.transform = `scale(1.02) translate3d(${ry*0.6}px, ${-rx*0.6}px, 0)`;
      });

      // reset on mouse leave
      document.addEventListener('mouseleave', ()=>{

        cardWrap.style.transform = 'translateZ(120px) translateY(-18px)';
        portalImg.style.transform = '';
      });
    })();

    // Ripple creator: make a wave on the portal when clicking login
    function createRipple(x, y){
      const r = document.createElement('div');
      r.className = 'ripple';
      const size = Math.max(portal.offsetWidth, portal.offsetHeight) * 1.2;
      r.style.width = r.style.height = size + 'px';
      r.style.left = x + 'px';
      r.style.top = y + 'px';
      portal.appendChild(r);
      // animate
      requestAnimationFrame(()=> {
        r.style.transition = 'transform 900ms cubic-bezier(.2,.8,.2,1), opacity 900ms linear';
        r.style.transform = 'translate(-50%,-50%) scale(1)';
        r.style.opacity = '1';
        r.style.transform = 'translate(-50%,-50%) scale(1)';
        setTimeout(()=>{
          r.style.transform = 'translate(-50%,-50%) scale(2.6)';
          r.style.opacity = '0';
        }, 50);
      });
      // remove after done
      setTimeout(()=> r.remove(), 1100);
    }

    // On login: perform ripple, brief glow & "project in" animation
    loginForm.addEventListener('submit', (e)=>{
      e.preventDefault(); // remove when integrating with backend

      // position ripple center of portal
      const pr = portal.getBoundingClientRect();
      const cx = pr.left + pr.width / 2 - pr.left;
      const cy = pr.top + pr.height / 2 - pr.top;
      createRipple(cx, cy);

      // brief portal pulse glow
      portal.style.transition = 'box-shadow 420ms ease';
      portal.style.boxShadow = '0 30px 90px rgba(0,120,255,0.28), inset 0 0 120px rgba(0,120,255,0.08)';
      setTimeout(()=> {
        portal.style.boxShadow = '0 20px 60px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.03)';
      }, 800);

      // micro-tilt on card
      cardWrap.animate([
        { transform: 'translateZ(120px) translateY(-18px) rotateX(0) rotateY(0)' },
        { transform: 'translateZ(140px) translateY(-28px) rotateX(-1.2deg) rotateY(1.2deg)' },
        { transform: 'translateZ(120px) translateY(-18px) rotateX(0) rotateY(0)' }
      ], { duration: 650, easing: 'cubic-bezier(.2,.9,.2,1)' });

      // small confirmation microcopy (replace with actual auth flow)
      const btn = document.getElementById('loginBtn');
      btn.disabled = true;
      btn.innerHTML = 'Authenticating‚Ä¶';
      setTimeout(()=>{
        btn.innerHTML = 'Login';
        btn.disabled = false;
      }, 1400);
    });

    // small UX: clicking labels focuses inputs nicely (enhancement)
    document.querySelectorAll('.input-wrap').forEach(w=>{
      w.addEventListener('click', ()=> {
        const input = w.querySelector('input');
        if(input) input.focus();
      });
    });

    // small touch: make portal rays subtle movement on interval (more life)
    let rayPhase = 0;
    setInterval(()=> {
      rayPhase += 0.18;
      const k = Math.sin(rayPhase)*12;
      document.querySelectorAll('.rays .ray').forEach((r,i)=>{
        r.style.transform = `translateY(${k * (i?0.6:1)}px) rotate(${k*0.06}deg) scale(${1 + Math.abs(k)*0.002})`;
      });
    }, 200);

    (function () {
  // Configurable options
  const options = {
    containerId: 'floating-particles',
    canvasId: 'floating-particles-canvas',
    particleCount: 40,            // default number of particles
    particleColor: 'rgba(255,255,255,0.65)',
    particleMinSize: 0.8,
    particleMaxSize: 2.6,
    connectLines: true,
    lineColor: 'rgba(255,255,255,0.08)',
    maxConnectionDistance: 120
  };

  // Avoid duplicate initialization
  if (document.getElementById(options.canvasId)) return;

  const container = document.getElementById(options.containerId);
  if (!container) {
    console.warn('Floating particles: container not found:', options.containerId);
    return;
  }

  // Create canvas
  const canvas = document.createElement('canvas');
  canvas.id = options.canvasId;
  canvas.style.width = '100%';
  canvas.style.height = '100%';
  container.appendChild(canvas);

  // Setup for high-DPI
  const ctx = canvas.getContext('2d');
  let dpr = Math.max(1, window.devicePixelRatio || 1);

  function fitCanvas() {
    dpr = Math.max(1, window.devicePixelRatio || 1);
    const rect = container.getBoundingClientRect();
    canvas.width = Math.round(rect.width * dpr);
    canvas.height = Math.round(rect.height * dpr);
    canvas.style.width = rect.width + 'px';
    canvas.style.height = rect.height + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0); // scale drawing operations
  }

  // Particle class
  class Particle {
    constructor(w, h) {
      this.reset(w, h);
    }
    reset(w, h) {
      this.x = Math.random() * w;
      this.y = Math.random() * h;
      // small diagonal drift bias for a nicer look
      this.vx = (Math.random() - 0.5) * 0.4;
      this.vy = (Math.random() - 0.5) * 0.4 - 0.05;
      this.size = Math.random() * (options.particleMaxSize - options.particleMinSize) + options.particleMinSize;
      this.alpha = 0.6 + Math.random() * 0.4;
    }
    update(w, h) {
      this.x += this.vx;
      this.y += this.vy;
      // wrap around edges for continuity (non-jarring)
      if (this.x < -20) this.x = w + 20;
      if (this.x > w + 20) this.x = -20;
      if (this.y < -20) this.y = h + 20;
      if (this.y > h + 20) this.y = -20;
    }
    draw(ctx) {
      ctx.beginPath();
      ctx.globalAlpha = this.alpha;
      ctx.fillStyle = options.particleColor;
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
      ctx.fill();
      ctx.globalAlpha = 1;
    }
  }

  // Create particles
  let particles = [];
  function initParticles() {
    const w = canvas.width / dpr;
    const h = canvas.height / dpr;
    particles = [];
    for (let i = 0; i < options.particleCount; i++) {
      particles.push(new Particle(w, h));
    }
  }

  // Animation loop
  let raf = null;
  function animate() {
    raf = requestAnimationFrame(animate);
    const w = canvas.width / dpr;
    const h = canvas.height / dpr;
    ctx.clearRect(0, 0, w, h);

    // update & draw particles
    for (let i = 0; i < particles.length; i++) {
      particles[i].update(w, h);
      particles[i].draw(ctx);
    }

    // optional: connect particles with subtle lines
    if (options.connectLines) {
      ctx.beginPath();
      for (let a = 0; a < particles.length; a++) {
        for (let b = a + 1; b < particles.length; b++) {
          const dx = particles[a].x - particles[b].x;
          const dy = particles[a].y - particles[b].y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          if (dist < options.maxConnectionDistance) {
            const alpha = 1 - dist / options.maxConnectionDistance;
            ctx.strokeStyle = options.lineColor.replace(/[\d\.]+\)$/,' ' + (alpha * 0.9) + ')');
            ctx.lineWidth = 1 * (alpha * 0.9);
            ctx.moveTo(particles[a].x, particles[a].y);
            ctx.lineTo(particles[b].x, particles[b].y);
          }
        }
      }
      ctx.stroke();
    }
  }

  // Resize handling
  let resizeTimer;
  function onResize() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(() => {
      fitCanvas();
      initParticles();
    }, 80);
  }
  window.addEventListener('resize', onResize, { passive: true });

  // Public destroy method if needed (prevents conflicts)
  function destroy() {
    cancelAnimationFrame(raf);
    window.removeEventListener('resize', onResize);
    if (canvas && canvas.parentNode) canvas.parentNode.removeChild(canvas);
  }

  // Start
  fitCanvas();
  initParticles();
  animate();

  // Expose destroy on the container DOM node so you can remove it later if needed:
  container._floatingParticlesDestroy = destroy;

  // Optionally expose a small API to tweak count at runtime:
  container._floatingParticlesSetCount = function (n) {
    options.particleCount = Math.max(0, Math.min(200, Math.round(n)));
    initParticles();
  };

})();

  </script>
  <!-- Include this at the end of theme/login.html body -->
<script src="js/auth.js"></script>
<script src="js/guard.js"></script>
<!-- Include on pages after guard.js -->
<script src="js/api.js"></script>

</body>
</html>
